# 依赖包版本锁定信息

本文档记录房产数据管理系统的核心依赖包及其版本信息，确保所有开发环境使用一致的依赖版本，避免因版本不一致导致的兼容性问题。

## 依赖分类

依赖包分为以下几类：

- **核心框架依赖**：项目的主要开发框架
- **UI 组件库**：界面组件和样式库
- **路由和状态管理**：前端路由和状态管理工具
- **工具库**：常用工具函数和辅助库
- **网络请求**：API 调用和网络请求库
- **数据可视化**：图表和地图展示库
- **构建工具**：项目构建和部署相关工具
- **开发依赖**：开发和测试阶段使用的工具

## 核心框架依赖

| 包名            | 版本      | 用途            | 说明                             |
| --------------- | --------- | --------------- | -------------------------------- |
| `react`         | `^18.2.0` | 前端核心框架    | 用于构建用户界面的 JavaScript 库 |
| `react-dom`     | `^18.2.0` | React DOM 渲染  | React 的 DOM 渲染器              |
| `react-scripts` | `5.0.1`   | React 脚本集    | Create React App 的核心脚本      |
| `typescript`    | `^4.9.5`  | TypeScript 支持 | 为 JavaScript 提供类型系统       |

## UI 组件库

| 包名                      | 版本      | 用途                | 说明                            |
| ------------------------- | --------- | ------------------- | ------------------------------- |
| `antd`                    | `^5.12.8` | Ant Design 组件库   | 企业级 UI 设计语言和 React 实现 |
| `@ant-design/icons`       | `^5.2.6`  | Ant Design 图标     | Ant Design 的图标集合           |
| `antd-pro-components`     | `^2.5.2`  | Ant Design Pro 组件 | Ant Design Pro 的高级组件       |
| `tailwindcss`             | `^3.4.0`  | 实用优先的 CSS 框架 | 用于快速构建自定义界面          |
| `@tailwindcss/typography` | `^0.5.10` | Tailwind 排版工具   | 用于文档和内容排版              |
| `@tailwindcss/forms`      | `^0.5.7`  | Tailwind 表单样式   | 增强表单元素的样式              |

## 路由和状态管理

| 包名                    | 版本      | 用途           | 说明                         |
| ----------------------- | --------- | -------------- | ---------------------------- |
| `react-router-dom`      | `^6.21.1` | React 路由     | 用于处理 React 应用的路由    |
| `zustand`               | `^4.4.7`  | 状态管理库     | 轻量级状态管理解决方案       |
| `react-query`           | `^3.39.3` | 数据获取库     | 用于数据获取、缓存和状态同步 |
| `@tanstack/react-query` | `^4.36.1` | React Query v4 | React Query 的最新版本       |
| `jotai`                 | `^2.6.1`  | 原子化状态管理 | 基于原子的状态管理库         |

## 工具库

| 包名         | 版本       | 用途                  | 说明                     |
| ------------ | ---------- | --------------------- | ------------------------ |
| `lodash`     | `^4.17.21` | JavaScript 实用工具库 | 提供丰富的函数式编程工具 |
| `dayjs`      | `^1.11.10` | 日期处理库            | 轻量级日期时间处理库     |
| `axios`      | `^1.6.2`   | HTTP 客户端           | 用于发送 HTTP 请求       |
| `qs`         | `^6.11.2`  | 查询字符串解析        | 用于处理 URL 查询字符串  |
| `validator`  | `^13.11.0` | 字符串验证库          | 用于验证和清理字符串     |
| `js-cookie`  | `^3.0.5`   | Cookie 操作           | 用于处理浏览器 Cookie    |
| `uuid`       | `^9.0.1`   | UUID 生成器           | 生成唯一标识符           |
| `classnames` | `^2.5.1`   | CSS 类名管理          | 条件性地拼接 CSS 类名    |

## 网络请求

| 包名                           | 版本      | 用途        | 说明                         |
| ------------------------------ | --------- | ----------- | ---------------------------- |
| `axios`                        | `^1.6.2`  | HTTP 客户端 | 用于发送 HTTP 请求           |
| `@reduxjs/toolkit/query/react` | `^2.0.1`  | RTK Query   | Redux Toolkit 的数据获取工具 |
| `axios-retry`                  | `^3.7.0`  | 请求重试    | 自动重试失败的请求           |
| `axios-mock-adapter`           | `^1.22.0` | 模拟请求    | 用于测试时模拟 API 响应      |

## 数据可视化

| 包名                      | 版本      | 用途            | 说明                       |
| ------------------------- | --------- | --------------- | -------------------------- |
| `echarts`                 | `^5.4.3`  | 图表库          | 交互式数据可视化图表库     |
| `react-echarts`           | `^2.0.16` | React ECharts   | ECharts 的 React 封装      |
| `@ant-design/plots`       | `^1.20.1` | Ant Design 图表 | 基于 G2Plot 的图表组件     |
| `mapbox-gl`               | `^2.15.0` | 地图可视化      | 现代交互式地图库           |
| `react-map-gl`            | `^7.1.6`  | React MapGL     | Mapbox GL JS 的 React 封装 |
| `@amap/amap-jsapi-loader` | `^1.0.1`  | 高德地图加载器  | 加载高德地图 JS API        |

## 文件处理

| 包名             | 版本      | 用途       | 说明             |
| ---------------- | --------- | ---------- | ---------------- |
| `file-saver`     | `^2.0.5`  | 文件保存   | 客户端保存文件   |
| `xlsx`           | `^0.18.5` | Excel 处理 | 读写 Excel 文件  |
| `react-dropzone` | `^14.2.3` | 文件拖放   | 文件上传拖放组件 |
| `react-pdf`      | `^7.5.1`  | PDF 查看器 | PDF 文档查看组件 |

## 构建工具

| 包名                   | 版本       | 用途                         | 说明                       |
| ---------------------- | ---------- | ---------------------------- | -------------------------- |
| `vite`                 | `^5.0.8`   | 构建工具                     | 下一代前端构建工具         |
| `@vitejs/plugin-react` | `^4.2.1`   | Vite React 插件              | Vite 的 React 支持插件     |
| `vite-plugin-svgr`     | `^4.2.0`   | SVG 处理                     | 将 SVG 作为 React 组件导入 |
| `rollup`               | `^4.9.1`   | JavaScript 模块打包器        | Vite 使用的打包引擎        |
| `esbuild`              | `^0.19.11` | JavaScript/TypeScript 编译器 | 超快速的 JavaScript 编译器 |

## 开发依赖

| 包名                           | 版本      | 用途                    | 说明                               |
| ------------------------------ | --------- | ----------------------- | ---------------------------------- |
| `eslint`                       | `^8.56.0` | JavaScript 代码检查     | 识别和报告代码问题                 |
| `eslint-config-prettier`       | `^9.1.0`  | ESLint 和 Prettier 集成 | 禁用 ESLint 与 Prettier 冲突的规则 |
| `eslint-plugin-prettier`       | `^5.1.2`  | Prettier ESLint 插件    | 将 Prettier 作为 ESLint 规则运行   |
| `eslint-plugin-react`          | `^7.33.2` | React ESLint 插件       | React 特定的 ESLint 规则           |
| `eslint-plugin-react-hooks`    | `^4.6.0`  | React Hooks ESLint 插件 | 验证 React Hooks 的正确使用        |
| `prettier`                     | `^3.1.1`  | 代码格式化工具          | 代码格式化工具                     |
| `husky`                        | `^8.0.3`  | Git hooks 工具          | 用于在 Git 操作前执行脚本          |
| `lint-staged`                  | `^15.2.0` | 暂存文件检查            | 对 Git 暂存的文件运行脚本          |
| `jest`                         | `^29.7.0` | JavaScript 测试框架     | 单元测试和集成测试框架             |
| `@testing-library/react`       | `^14.1.2` | React 测试库            | React 组件测试工具                 |
| `@testing-library/jest-dom`    | `^6.1.5`  | Jest DOM 匹配器         | 扩展 Jest 的 DOM 相关断言          |
| `@testing-library/user-event`  | `^14.5.1` | 用户事件模拟            | 模拟用户交互的测试工具             |
| `msw`                          | `^1.3.1`  | API 模拟                | API 模拟库                         |
| `webpack-bundle-analyzer`      | `^4.10.1` | 打包分析                | 分析打包后的文件大小               |
| `stylelint`                    | `^16.1.0` | CSS 检查工具            | CSS 和 SCSS 代码检查               |
| `stylelint-config-standard`    | `^35.0.0` | Stylelint 标准配置      | Stylelint 的标准配置               |
| `stylelint-config-tailwindcss` | `^0.0.7`  | Tailwind CSS 配置       | Tailwind CSS 的 Stylelint 配置     |

## 后端依赖

| 包名                 | 版本      | 用途              | 说明                           |
| -------------------- | --------- | ----------------- | ------------------------------ |
| `express`            | `^4.18.2` | Web 框架          | Node.js Web 应用框架           |
| `express-rate-limit` | `^7.1.5`  | 速率限制          | Express 请求速率限制中间件     |
| `jsonwebtoken`       | `^9.0.2`  | JWT 实现          | 用于生成和验证 JSON Web Tokens |
| `bcryptjs`           | `^2.4.3`  | 密码加密          | 用于密码哈希和验证             |
| `mongoose`           | `^8.0.3`  | MongoDB ODM       | MongoDB 对象文档映射           |
| `sequelize`          | `^6.35.2` | ORM 框架          | SQL ORM 框架                   |
| `mysql2`             | `^3.6.5`  | MySQL 客户端      | MySQL 和 MariaDB 客户端        |
| `pg`                 | `^8.11.3` | PostgreSQL 客户端 | PostgreSQL 客户端              |
| `ioredis`            | `^5.3.2`  | Redis 客户端      | Redis 客户端                   |
| `winston`            | `^3.11.0` | 日志库            | 日志记录库                     |
| `dotenv`             | `^16.3.1` | 环境变量管理      | 从 .env 文件加载环境变量       |
| `helmet`             | `^7.1.0`  | 安全头            | 设置安全相关的 HTTP 头         |
| `cors`               | `^2.8.5`  | CORS 中间件       | 处理跨域资源共享               |
| `morgan`             | `^1.10.0` | HTTP 请求日志     | HTTP 请求日志中间件            |

## 包管理

### npm 配置

推荐使用 npm v8.x+ 进行包管理，并在项目根目录创建 `.npmrc` 文件以确保版本一致性：

```ini
# .npmrc 文件内容
engine-strict=true
save-exact=true
legacy-peer-deps=false
```

### 锁定文件

项目使用以下锁定文件确保依赖版本一致性：

- **`package-lock.json`**：npm 的依赖锁定文件
- **`yarn.lock`**（可选）：如果使用 yarn，需要此锁定文件
- **`pnpm-lock.yaml`**（可选）：如果使用 pnpm，需要此锁定文件

## 版本控制策略

### 版本号格式

遵循语义化版本控制（Semantic Versioning）：

- **Patch**: 修复 bug，向后兼容
- **Minor**: 添加新功能，向后兼容
- **Major**: 不兼容的 API 更改

### 更新依赖的流程

1. **检查更新**：

   ```bash
   npm outdated
   # 或使用依赖检查工具
   npm audit
   ```

2. **更新依赖**：

   ```bash
   # 更新特定包
   npm update <package-name>
   # 或更新所有包
   npm update
   ```

3. **测试**：更新后运行测试确保项目正常运行

   ```bash
   npm test
   npm run lint
   ```

4. **更新锁定文件**：提交更新后的 `package-lock.json` 文件

## 依赖管理最佳实践

1. **锁定版本**：使用 `save-exact=true` 确保精确的版本控制
2. **定期审计**：使用 `npm audit` 检查依赖的安全漏洞
3. **避免过度依赖**：仅引入必要的依赖包
4. **优先使用官方包**：优先使用官方维护的包
5. **版本兼容性检查**：在更新主要依赖前检查兼容性
6. **依赖分组**：按功能将依赖分组，并添加注释说明

## 依赖冲突解决

### 常见依赖冲突

1. **Peer Dependencies 冲突**：

   ```bash
   # 使用 --legacy-peer-deps 临时解决
   npm install --legacy-peer-deps
   ```

2. **版本范围冲突**：
   - 使用 `resolutions` 字段在 package.json 中强制指定版本

   ```json
   "resolutions": {
     "some-dependency": "^1.2.3"
   }
   ```

3. **缓存问题**：
   ```bash
   # 清除 npm 缓存
   npm cache clean --force
   rm -rf node_modules
   npm install
   ```

## 特殊环境的依赖处理

### 开发环境

- 开发环境可以使用 `npm link` 进行本地包开发和测试
- 使用 `NODE_ENV=development` 环境变量启用开发模式

### 生产环境

- 生产环境安装时使用 `--production` 标志忽略开发依赖：
  ```bash
  npm install --production
  ```
- 使用 `NODE_ENV=production` 环境变量启用生产优化

---

文档最后更新时间：2024-01-01
