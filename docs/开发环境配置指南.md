# 开发环境配置指南

本文档提供房产数据管理系统开发环境的详细配置步骤，帮助开发人员快速搭建本地开发环境。

## 环境要求

### 基础环境

- **操作系统**：Windows 10/11、macOS 11+、Ubuntu 20.04+
- **Node.js**：v16.x 或更高版本
- **包管理器**：npm v8.x+ 或 yarn v1.22+
- **Git**：v2.30+（用于版本控制）

### 推荐开发工具

- **IDE**：VS Code
- **VS Code 插件**：ESLint、Prettier - Code formatter、React Developer Tools、Tailwind CSS IntelliSense
- **浏览器**：Chrome 90+（推荐安装 React Developer Tools 和 Redux DevTools 扩展）

## 安装步骤

### 1. 安装 Node.js 和 npm/yarn

#### Windows 系统

1. 访问 [Node.js 官方网站](https://nodejs.org/)
2. 下载并安装 LTS 版本的 Node.js
3. 安装完成后，打开命令提示符，验证安装：
   ```bash
   node -v
   npm -v
   ```
4. 安装 yarn（可选）：
   ```bash
   npm install -g yarn
   ```

#### macOS 系统

使用 Homebrew 安装：

```bash
brew install node
brew install yarn --without-node
```

#### Linux 系统（Ubuntu）

```bash
curl -fsSL https://deb.nodesource.com/setup_16.x | sudo -E bash -
sudo apt-get install -y nodejs

# 安装 yarn
curl -sS https://dl.yarnpkg.com/debian/pubkey.gpg | sudo apt-key add -
echo "deb https://dl.yarnpkg.com/debian/ stable main" | sudo tee /etc/apt/sources.list.d/yarn.list
sudo apt-get update && sudo apt-get install yarn
```

### 2. 克隆项目代码

```bash
git clone <repository-url>
cd 新建文件夹 (8)
```

### 3. 安装项目依赖

使用 npm：

```bash
npm install
```

或者使用 yarn：

```bash
yarn install
```

### 4. 配置环境变量

1. 复制环境变量示例文件：

   ```bash
   # Windows
   copy .env.example .env

   # macOS/Linux
   cp .env.example .env
   ```

2. 编辑 `.env` 文件，配置以下必要参数：

   ```dotenv
   # 开发环境配置
   NODE_ENV=development

   # API 配置
   REACT_APP_API_BASE_URL=http://localhost:3000/api/v1

   # JWT 配置
   REACT_APP_JWT_SECRET=your_jwt_secret_key
   REACT_APP_JWT_EXPIRES_IN=86400

   # 百度地图配置
   REACT_APP_BAIDU_MAP_AK=your_baidu_map_api_key

   # 云存储配置（根据需要选择一个）
   # 阿里云OSS
   REACT_APP_OSS_REGION=oss-cn-shanghai
   REACT_APP_OSS_BUCKET=your_oss_bucket_name
   REACT_APP_OSS_ACCESS_KEY=your_access_key_id
   REACT_APP_OSS_SECRET_KEY=your_access_key_secret

   # 腾讯云COS
   REACT_APP_COS_REGION=ap-shanghai
   REACT_APP_COS_BUCKET=your_cos_bucket_name
   REACT_APP_COS_SECRET_ID=your_secret_id
   REACT_APP_COS_SECRET_KEY=your_secret_key

   # 短信服务配置
   REACT_APP_SMS_ACCESS_KEY=your_sms_access_key
   REACT_APP_SMS_SECRET_KEY=your_sms_secret_key
   REACT_APP_SMS_SIGN_NAME=your_sms_sign_name

   # 日志级别
   REACT_APP_LOG_LEVEL=debug
   ```

   > **注意**：开发环境下的密钥和密钥应该使用测试账号，避免使用生产环境的真实凭证。

### 5. 配置 VS Code（推荐）

1. 安装推荐的 VS Code 插件：
   - ESLint
   - Prettier - Code formatter
   - React Developer Tools
   - Tailwind CSS IntelliSense

2. 确保项目根目录下的 `.vscode/settings.json` 文件配置正确：
   ```json
   {
     "editor.defaultFormatter": "esbenp.prettier-vscode",
     "editor.formatOnSave": true,
     "editor.codeActionsOnSave": {
       "source.fixAll.eslint": true
     },
     "eslint.validate": ["javascript", "javascriptreact", "html", "json"],
     "prettier.requireConfig": true,
     "files.eol": "\n",
     "editor.tabSize": 2,
     "editor.insertSpaces": true,
     "editor.detectIndentation": false
   }
   ```

## 启动开发服务器

### 1. 启动前端开发服务器

使用 npm：

```bash
npm run dev
```

或者使用 yarn：

```bash
yarn dev
```

服务启动后，可以通过 http://localhost:3000 访问应用。

### 2. 启动 API 网关（可选，如果需要本地测试 API）

```bash
npm run gateway
# 或
yarn gateway
```

API 网关将在 http://localhost:3000 启动。

## 开发工作流

### 代码格式化与检查

在提交代码前，请运行以下命令确保代码质量：

```bash
# 代码检查
npm run lint
# 或
yarn lint

# 自动修复问题
npm run lint:fix
# 或
yarn lint:fix

# 格式化代码
npm run format
# 或
yarn format
```

### 分支管理

- **develop**：开发主分支，功能开发应基于此分支创建新分支
- **feature/xxx**：新功能开发分支
- **bugfix/xxx**：bug 修复分支

## 常见问题排查

### 依赖安装失败

- 检查 Node.js 版本是否符合要求
- 尝试清除 npm 缓存：
  ```bash
  npm cache clean --force
  ```
- 或者使用 yarn 替代 npm

### 端口冲突

如果 3000 端口被占用，可以修改启动脚本中的端口号，或在 `.env` 文件中添加：

```dotenv
PORT=3001
```

### 环境变量不生效

确保：

1. `.env` 文件在项目根目录下
2. 变量名以 `REACT_APP_` 开头（React 项目要求）
3. 修改环境变量后重启开发服务器

## 开发建议

1. 按照项目代码规范编写代码
2. 为组件和函数添加适当的注释
3. 使用 TypeScript 类型（如果项目支持）
4. 编写单元测试（推荐）
5. 定期拉取最新代码，避免冲突

## 相关资源

- [React 官方文档](https://reactjs.org/docs/getting-started.html)
- [Ant Design 文档](https://ant.design/docs/react/introduce)
- [ECharts 文档](https://echarts.apache.org/zh/index.html)
- [Tailwind CSS 文档](https://tailwindcss.com/docs)
- [React Router 文档](https://reactrouter.com/web/guides/quick-start)

---

文档最后更新时间：2024-01-01
